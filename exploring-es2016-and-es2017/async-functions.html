<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>5. Async functions | Exploring JS</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/Exploring-JS/assets/css/0.styles.95ade7a5.css" as="style"><link rel="preload" href="/Exploring-JS/assets/js/app.66ce9ded.js" as="script"><link rel="preload" href="/Exploring-JS/assets/js/6.82711816.js" as="script"><link rel="prefetch" href="/Exploring-JS/assets/js/3.29cc9666.js"><link rel="prefetch" href="/Exploring-JS/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/Exploring-JS/assets/js/4.4766a856.js"><link rel="prefetch" href="/Exploring-JS/assets/js/5.3eb28697.js"><link rel="prefetch" href="/Exploring-JS/assets/js/7.25e942cb.js"><link rel="prefetch" href="/Exploring-JS/assets/js/8.274d5fb8.js">
    <link rel="stylesheet" href="/Exploring-JS/assets/css/0.styles.95ade7a5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Exploring-JS/" class="home-link router-link-active"><!----> <span class="site-name">Exploring JS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Exploring-JS/exploring-es6/" class="nav-link">Exploring ES6</a></div><div class="nav-item"><a href="/Exploring-JS/exploring-es2016-and-es2017/" class="nav-link router-link-active">Exploring ES2016 and ES2017</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Exploring-JS/exploring-es6/" class="nav-link">Exploring ES6</a></div><div class="nav-item"><a href="/Exploring-JS/exploring-es2016-and-es2017/" class="nav-link router-link-active">Exploring ES2016 and ES2017</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Exploring-JS/exploring-es2016-and-es2017/" class="sidebar-link">Exploring ES2016 and ES2017</a></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>ECMAScript 2017</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Exploring-JS/exploring-es2016-and-es2017/async-functions.html" class="active sidebar-link">5. Async functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Exploring-JS/exploring-es2016-and-es2017/async-functions.html#_5-1-개요" class="sidebar-link">5.1 개요</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Exploring-JS/exploring-es2016-and-es2017/async-functions.html#_5-1-1-변형" class="sidebar-link">5.1.1 변형</a></li><li class="sidebar-sub-header"><a href="/Exploring-JS/exploring-es2016-and-es2017/async-functions.html#_5-1-2-async-함수는-항상-promise를-반환한다" class="sidebar-link">5.1.2 async 함수는 항상 Promise를 반환한다.</a></li><li class="sidebar-sub-header"><a href="/Exploring-JS/exploring-es2016-and-es2017/async-functions.html#_5-1-3-await을-통한-비동기-계산의-결과와-오류-처리" class="sidebar-link">5.1.3 await을 통한 비동기 계산의 결과와 오류 처리</a></li></ul></li><li class="sidebar-sub-header"><a href="/Exploring-JS/exploring-es2016-and-es2017/async-functions.html#_5-2-async-함수-이해하기" class="sidebar-link">5.2 async 함수 이해하기</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="_5-async-functions"><a href="#_5-async-functions" aria-hidden="true" class="header-anchor">#</a> 5. Async functions</h1> <h2 id="_5-1-개요"><a href="#_5-1-개요" aria-hidden="true" class="header-anchor">#</a> 5.1 개요</h2> <h3 id="_5-1-1-변형"><a href="#_5-1-1-변형" aria-hidden="true" class="header-anchor">#</a> 5.1.1 변형</h3> <p>async 함수에는 다음 변형이 있다. <code>async</code> 키워드는 어디에나 있을 수 있다.</p> <ul><li>async 함수 정의: <code>async function foo() {}</code></li> <li>async 함수 표현식: <code>const foo = async function () {};</code></li> <li>async 메소드 정의: <code>let obj = { async foo() {} }</code></li> <li>async arrow functions: <code>const foo = async () =&gt; {};</code></li></ul> <h3 id="_5-1-2-async-함수는-항상-promise를-반환한다"><a href="#_5-1-2-async-함수는-항상-promise를-반환한다" aria-hidden="true" class="header-anchor">#</a> 5.1.2 async 함수는 항상 Promise를 반환한다.</h3> <p>async 함수의 Promise 처리하기:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>
</code></pre></div><p>async 함수의 Promise 거부하기:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Problem!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Problem!</span>
</code></pre></div><h3 id="_5-1-3-await을-통한-비동기-계산의-결과와-오류-처리"><a href="#_5-1-3-await을-통한-비동기-계산의-결과와-오류-처리" aria-hidden="true" class="header-anchor">#</a> 5.1.3 <code>await</code>을 통한 비동기 계산의 결과와 오류 처리</h3> <p><code>await</code>(async 함수 내에서만 허용되는) 연산자는 피연산자인 Promise가 해결되기를 기다린다:</p> <ul><li>Promise가 처리된다면, <code>await</code>의 결과는 처리 값이다.</li> <li>Promise가 거부된다면, <code>await</code>은 거부 값을 throw한다.</li></ul> <p>단일 비동기 결과 처리:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">otherAsyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 다음과 동등:</span>
<span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">otherAsyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>순차적으로 다중 비동기 결과 처리:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">otherAsyncFunc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">otherAsyncFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 다음과 동등:</span>
<span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">otherAsyncFunc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result1 <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">otherAsyncFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result2 <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>병렬로 다중 비동기 결과 처리:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">otherAsyncFunc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">otherAsyncFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 다음과 동등:</span>
<span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">otherAsyncFunc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">otherAsyncFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">[</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>에러 처리:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">otherAsyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 다음과 동등:</span>
<span class="token keyword">function</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">otherAsyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-2-async-함수-이해하기"><a href="#_5-2-async-함수-이해하기" aria-hidden="true" class="header-anchor">#</a> 5.2 async 함수 이해하기</h2></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Exploring-JS/exploring-es2016-and-es2017/" class="prev router-link-active">
          Exploring ES2016 and ES2017
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/Exploring-JS/assets/js/6.82711816.js" defer></script><script src="/Exploring-JS/assets/js/app.66ce9ded.js" defer></script>
  </body>
</html>
